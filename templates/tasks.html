{% extends "layout.html" %}
{% block title %}Tasks{% endblock %}

{% block content %}
<h2>Task Management</h2>

<!-- Add Task Form -->
<div class="card p-3 mb-4 bg-dark text-white">
  <h5>Add New Task</h5>
  <form method="POST" action="{{ url_for('tasks.add_task') }}">
    <div class="mb-2">
      <input type="text" class="form-control" name="title" placeholder="Task Title" required>
    </div>
    <div class="mb-2">
      <textarea class="form-control" name="description" placeholder="Description"></textarea>
    </div>
    <div class="mb-2">
      <input type="text" class="form-control" name="assigned_to" placeholder="Assign To" required>
    </div>
    <div class="mb-2">
      <input type="date" class="form-control" name="due_date">
    </div>
    <div class="mb-2">
      <select class="form-select" name="priority">
        <option value="High">High</option>
        <option value="Medium" selected>Medium</option>
        <option value="Low">Low</option>
      </select>
    </div>
    <button class="btn btn-success">Add Task</button>
  </form>
</div>

<!-- Task List Table -->
<div class="card p-3 bg-dark text-white">
  <h5>Task List</h5>
      <tr>
        <th>ID</th>

        <th>Title</th>
        <th>Assigned To</th>
        <th>Priority</th>
        <th>Status</th>
        <th>Due Date</th>
        <th>Actions</th>
      </tr>
    <tbody>
      {% for task in tasks %}
        <td>{{ task.id }}</td>
        <td>{{ task.title }}</td>
        <td>{{ task.assigned_to }}</td>
        <td>
            <select class="form-select" name="status" onchange="this.form.submit()">
              <option value="Pending" {% if task.status=='Pending' %}selected{% endif %}>Pending</option>
              <option value="In Progress" {% if task.status=='In Progress' %}selected{% endif %}>In Progress</option>
              <option value="Done" {% if task.status=='Done' %}selected{% endif %}>Done</option>
            </select>
          </form>
        </td>
        <td>{{ task.due_date or "-" }}</td>
        <td>
          <a href="{{ url_for('tasks.delete_task', task_id=task.id) }}" class="btn btn-danger btn-sm">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
          <form method="POST" action="{{ url_for('tasks.update_task', task_id=task.id) }}">
        <td>{{ task.priority }}</td>
      <tr>
    </thead>

